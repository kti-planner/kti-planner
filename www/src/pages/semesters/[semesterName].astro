---
import { Semester, type SemesterType } from '@backend/semester';
import Layout from '@layouts/Layout.astro';

const { semesterName } = Astro.params;
const { langId } = Astro.locals;

const translations = {
    'en': {
        'Semesters': 'Semesters',
        'Winter Semester': 'Winter Semester',
        'Summer Semester': 'Summer Semester',
    },
    'pl': {
        'Semesters': 'Semestry',
        'Winter Semester': 'Semestr Zimowy',
        'Summer Semester': 'Semestr Letni',
    },
};

function translate(text: keyof (typeof translations)[LangId]): string {
    return translations[langId][text];
}

if (semesterName === undefined) {
    return new Response(null, { status: 404 });
}

const [type, year] = semesterName.split('-');
if (type == undefined || year == undefined) {
    return new Response(null, { status: 404 });
}

const semester = await Semester.fetchByYearAndType(parseInt(year), type as SemesterType);
if (!semester) {
    return new Response(null, { status: 404 });
}
---

<Layout
    breadcrumbs={[
        { text: translate('Semesters'), href: '/semesters/' },
        {
            text: `${semester.type === 'summer' ? translate('Summer Semester') : translate('Winter Semester')} ${semester.year}/${semester.year + 1}`,
            href: '#',
        },
    ]}
/>
